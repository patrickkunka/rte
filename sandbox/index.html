<!DOCTYPE html>
<html>
    <head>
        <style>
            .editor {
                width: 30%;
                min-height: 400px;
                display: inline-block;
                vertical-align: top;
                background: white;
            }

            .editor:focus {
                outline: none;
            }

            .pre {
                width: 30%;
                height: auto;
                vertical-align: top;
                display: inline-block;
            }

            .plaintext {
                display: inline-block;
                vertical-align: top;
                width:  30%;
                min-height: 400px;
            }
        </style>
        <title>Tome Sandbox</title>
    </head>
    <body style="background: #eee;">
        <div class="editor" contenteditable="true">
        </div>
        <textarea class="plaintext"></textarea>
        <pre class="pre"></pre>
    </body>
    <script src="../dist/tome.js"></script>
    <script>
        const plainText = document.querySelector('textarea');
        const pre       = document.querySelector('pre');

        const editor = tome(document.querySelector('.editor'), {
            value: {
                text: 'Line one.\n\nLine two.\n\nLine three.',
                markups: [
                    ['p', 0, 9],
                    ['p', 11, 20],
                    ['p', 22, 33]
                ]
            },
            callbacks: {
                onStateChange: handleStateChange,
                onAddAnchor: done => {
                    console.log('adding anchor');

                    done({
                        href: 'https://www.kunkalabs.com',
                        target: '_blank'
                    });
                }
            },
            debug: {
                enable: true
            }
        });

        function handleStateChange(state, actionType) {
            plainText.value = state.text;
            pre.innerHTML =
                JSON.stringify(state.selection) +
                '\n\n' +
                JSON.stringify(state.markups.map(markup => markup.toArray()), null, 4) +
                '\n\n' +
                JSON.stringify(state.activeInlineMarkups.tags, null, 4);
        }
    </script>
</html>